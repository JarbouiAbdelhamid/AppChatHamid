(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{JnQb:function(l,n,e){"use strict";e.r(n);var t=e("CcnG"),o=e("mtpe"),u=function(){function l(l,n){var e=this;this.router=l,this.route=n,this.loggedInUserData=o.CometChat.getLoggedinUser(),this.route.queryParams.subscribe(function(l){console.log("params: ",l),e.router.getCurrentNavigation().extras.state&&(e.currentData=e.router.getCurrentNavigation().extras.state.user)})}return l.prototype.ionViewWillEnter=function(){var l=this;setTimeout(function(){console.log("scrolled caled"),l.content.scrollToBottom(300)},2e3)},l.prototype.ngOnInit=function(){console.log("data of currentData is ",this.currentData),console.log("uid ",this.currentData.uid),this.messagesRequest=(new o.CometChat.MessagesRequestBuilder).setLimit(30).setUID(this.currentData.uid).build(),this.loadMessages(),this.addMessageEventListner()},l.prototype.loadMessages=function(){var l=this;this.messagesRequest.fetchPrevious().then(function(n){console.log("Message list fetched:",n),l.userMessages=n,console.log("UserMessages are ",l.userMessages),l.moveToBottom()},function(l){console.log("Message fetching failed with error:",l)})},l.prototype.loadPreviousMessages=function(){var l=this;this.messagesRequest.fetchPrevious().then(function(n){console.log("Message list fetched:",n),""!=n&&(l.userMessages=n.concat(l.userMessages)),console.log("UserMessages are ",l.userMessages)},function(l){console.log("Message fetching failed with error:",l)})},l.prototype.moveToBottom=function(){console.log("here moving to bottom"),this.content.scrollToBottom(1500)},l.prototype.logScrollStart=function(){console.log("logScrollStart : When Scroll Starts")},l.prototype.logScrolling=function(l){console.log("logScrolling : When Scrolling ",l.detail.scrollTop),0==l.detail.scrollTop&&(console.log("scroll reached to top"),this.loadPreviousMessages())},l.prototype.logScrollEnd=function(){console.log("logScrollEnd : When Scroll Ends")},l.prototype.addMessageEventListner=function(){var l=this;o.CometChat.addMessageListener("OneOnOneMessage",new o.CometChat.MessageListener({onTextMessageReceived:function(n){console.log("Text message successfully",n),n.receiverID==l.loggedInUserData.uid&&(l.userMessages.push(n),l.moveToBottom())},onMediaMessageReceived:function(l){console.log("Media message received successfully",l)},onCutomMessageReceived:function(l){console.log("Media message received successfully",l)}}))},l.prototype.sendMessage=function(){var l=this;if(console.log("tapped on send Message ",this.messageText),""!=this.messageText){var n=new o.CometChat.TextMessage(this.currentData.uid,this.messageText,o.CometChat.MESSAGE_TYPE.TEXT,o.CometChat.RECEIVER_TYPE.USER);o.CometChat.sendMessage(n).then(function(n){console.log("Message sent successfully:",n),l.userMessages.push(n),l.messageText="",l.moveToBottom()},function(l){console.log("Message sending failed with error:",l)})}},l}(),s=function(){return function(){}}(),i=e("pMnS"),a=e("oBZk"),r=e("ZZ/e"),c=e("Ip0R"),g=e("gIcY"),d=e("ZYCi"),b=t.nb({encapsulation:0,styles:[["ion-avatar[_ngcontent-%COMP%]{max-width:25px;max-height:25px}.circular[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%}.Inline[_ngcontent-%COMP%]{display:inline-flex;vertical-align:middle}.chat-box-container[_ngcontent-%COMP%]{position:fixed;bottom:2px;display:inline-flex;padding:0 7px 0 0;background:#fff;width:100%}.chat-editor-box[_ngcontent-%COMP%]{display:inline-flex;justify-items:center;background:#fff;align-content:center;align-items:center;border:1px solid #ccc;border-radius:24px;padding-left:4px!important;font-size:14px;min-height:38px;max-height:100px}.btnSendChatView[_ngcontent-%COMP%]{height:38px;width:38px;margin-left:4px;background:#2636be;color:#fff;display:flex;justify-content:center;align-content:center;align-items:center;vertical-align:middle;border-radius:50%}.btnSendChat[_ngcontent-%COMP%]{height:24px;width:24px}.chat[_ngcontent-%COMP%]{font-family:sans-serif;display:flex;flex-direction:column}.message[_ngcontent-%COMP%]{margin:.2em 0;padding:.5em;max-width:70%}.me[_ngcontent-%COMP%]{align-self:flex-start;background-color:#f1f0f0;color:#000;border-radius:10px 10px 10px 0}.you[_ngcontent-%COMP%]{align-self:flex-end;background-color:#2636be;color:#fff;border-radius:10px 10px 0}"]],data:{}});function p(l){return t.Eb(0,[(l()(),t.pb(0,0,null,null,2,"div",[["class","chat"]],null,null,null,null,null)),(l()(),t.pb(1,0,null,null,1,"div",[],[[8,"className",0]],null,null,null,null)),(l()(),t.Db(2,null,["",""]))],null,function(l,n){l(n,1,0,n.context.$implicit.sender.uid===n.component.currentData.uid?"message me":"message you"),l(n,2,0,n.context.$implicit.text)})}function h(l){return t.Eb(0,[t.Bb(402653184,1,{content:0}),(l()(),t.pb(1,0,null,null,15,"ion-header",[],null,null,null,a.C,a.h)),t.ob(2,49152,null,0,r.A,[t.h,t.k],null,null),(l()(),t.pb(3,0,null,0,13,"ion-toolbar",[],null,null,null,a.P,a.u)),t.ob(4,49152,null,0,r.Ab,[t.h,t.k],null,null),(l()(),t.pb(5,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,a.z,a.e)),t.ob(6,49152,null,0,r.k,[t.h,t.k],null,null),(l()(),t.pb(7,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],function(l,n,e){var o=!0;return"click"===n&&(o=!1!==t.zb(l,9).onClick(e)&&o),o},a.x,a.c)),t.ob(8,49152,null,0,r.f,[t.h,t.k],null,null),t.ob(9,16384,null,0,r.g,[[2,r.gb],r.Gb],null,null),(l()(),t.pb(10,0,null,0,6,"ion-title",[],null,null,null,a.O,a.t)),t.ob(11,49152,null,0,r.yb,[t.h,t.k],null,null),(l()(),t.pb(12,0,null,0,1,"div",[["class","Inline"]],null,null,null,null,null)),(l()(),t.pb(13,0,null,null,0,"img",[["class","circular"]],[[8,"src",4]],null,null,null,null)),(l()(),t.pb(14,0,null,0,2,"div",[["class","Inline"]],null,null,null,null,null)),(l()(),t.pb(15,0,null,null,1,"span",[["style","padding:5px;"]],null,null,null,null,null)),(l()(),t.Db(16,null,["",""])),(l()(),t.pb(17,0,null,null,5,"ion-content",[["padding",""]],null,[[null,"ionScrollStart"],[null,"ionScroll"],[null,"ionScrollEnd"]],function(l,n,e){var t=!0,o=l.component;return"ionScrollStart"===n&&(t=!1!==o.logScrollStart()&&t),"ionScroll"===n&&(t=!1!==o.logScrolling(e)&&t),"ionScrollEnd"===n&&(t=!1!==o.logScrollEnd()&&t),t},a.A,a.f)),t.ob(18,49152,[[1,4],["content",4]],0,r.t,[t.h,t.k],{scrollEvents:[0,"scrollEvents"]},null),(l()(),t.pb(19,0,null,0,3,"ion-list",[],null,null,null,a.J,a.o)),t.ob(20,49152,null,0,r.N,[t.h,t.k],null,null),(l()(),t.gb(16777216,null,0,1,null,p)),t.ob(22,278528,null,0,c.h,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null),(l()(),t.pb(23,0,null,null,15,"ion-footer",[["no-border",""]],null,null,null,a.B,a.g)),t.ob(24,49152,null,0,r.y,[t.h,t.k],null,null),(l()(),t.pb(25,0,null,0,13,"ion-toolbar",[],null,null,null,a.P,a.u)),t.ob(26,49152,null,0,r.Ab,[t.h,t.k],null,null),(l()(),t.pb(27,0,null,0,11,"div",[["class","bar bar-footer bar-balanced chat-box-container"]],null,null,null,null,null)),(l()(),t.pb(28,0,null,null,6,"ion-input",[["class","chat-editor-box"],["placeholder","Type Your Message Here.."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(l,n,e){var o=!0,u=l.component;return"ionBlur"===n&&(o=!1!==t.zb(l,29)._handleBlurEvent()&&o),"ionChange"===n&&(o=!1!==t.zb(l,29)._handleInputEvent(e.target.value)&&o),"ngModelChange"===n&&(o=!1!==(u.messageText=e)&&o),o},a.G,a.l)),t.ob(29,16384,null,0,r.Jb,[t.k],null,null),t.Ab(1024,null,g.b,function(l){return[l]},[r.Jb]),t.ob(31,671744,null,0,g.e,[[8,null],[8,null],[8,null],[6,g.b]],{model:[0,"model"]},{update:"ngModelChange"}),t.Ab(2048,null,g.c,null,[g.e]),t.ob(33,16384,null,0,g.d,[[4,g.c]],null,null),t.ob(34,49152,null,0,r.F,[t.h,t.k],{placeholder:[0,"placeholder"],type:[1,"type"]},null),(l()(),t.pb(35,0,null,null,3,"div",[["class","btnSendChatView"]],null,null,null,null,null)),(l()(),t.pb(36,0,null,null,2,"button",[["class","btnSendChatView"],["clear",""],["item-right",""]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.sendMessage()&&t),t},null,null)),(l()(),t.pb(37,0,null,null,1,"ion-icon",[["class","btnSendChat"],["name","send"]],null,null,null,a.D,a.i)),t.ob(38,49152,null,0,r.B,[t.h,t.k],{name:[0,"name"]},null)],function(l,n){var e=n.component;l(n,18,0,!0),l(n,22,0,e.userMessages),l(n,31,0,e.messageText),l(n,34,0,"Type Your Message Here..","text"),l(n,38,0,"send")},function(l,n){var e=n.component;l(n,13,0,t.rb(1,"",e.currentData.avatar||"https://i0.wp.com/www.winhelponline.com/blog/wp-content/uploads/2017/12/user.png?resize=256%2C256&quality=100&ssl=1","")),l(n,16,0,e.currentData.name),l(n,28,0,t.zb(n,33).ngClassUntouched,t.zb(n,33).ngClassTouched,t.zb(n,33).ngClassPristine,t.zb(n,33).ngClassDirty,t.zb(n,33).ngClassValid,t.zb(n,33).ngClassInvalid,t.zb(n,33).ngClassPending)})}function f(l){return t.Eb(0,[(l()(),t.pb(0,0,null,null,1,"app-chat-view",[],null,null,null,h,b)),t.ob(1,114688,null,0,u,[d.m,d.a],null,null)],function(l,n){l(n,1,0)},null)}var m=t.lb("app-chat-view",u,f,{},{},[]);e.d(n,"ChatViewPageModuleNgFactory",function(){return x});var x=t.mb(s,[],function(l){return t.wb([t.xb(512,t.j,t.bb,[[8,[i.a,m]],[3,t.j],t.x]),t.xb(4608,c.j,c.i,[t.u,[2,c.p]]),t.xb(4608,g.g,g.g,[]),t.xb(4608,r.b,r.b,[t.z,t.g]),t.xb(4608,r.Fb,r.Fb,[r.b,t.j,t.q,c.c]),t.xb(4608,r.Ib,r.Ib,[r.b,t.j,t.q,c.c]),t.xb(1073742336,c.b,c.b,[]),t.xb(1073742336,g.f,g.f,[]),t.xb(1073742336,g.a,g.a,[]),t.xb(1073742336,r.Cb,r.Cb,[]),t.xb(1073742336,d.n,d.n,[[2,d.t],[2,d.m]]),t.xb(1073742336,s,s,[]),t.xb(1024,d.k,function(){return[[{path:"",component:u}]]},[])])})}}]);