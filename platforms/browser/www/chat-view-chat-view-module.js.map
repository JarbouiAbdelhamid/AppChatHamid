{"version":3,"sources":["webpack:///./src/app/chat-view/chat-view.module.ts","webpack:///./src/app/chat-view/chat-view.page.html","webpack:///./src/app/chat-view/chat-view.page.scss","webpack:///./src/app/chat-view/chat-view.page.ts"],"names":[],"mappings":"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","file":"chat-view-chat-view-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ChatViewPage } from './chat-view.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChatViewPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ChatViewPage]\n})\nexport class ChatViewPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar>\\n      <ion-buttons slot=\\\"start\\\">\\n        <ion-back-button></ion-back-button>\\n      </ion-buttons>\\n    <ion-title>\\n      <div class=\\\"Inline\\\"><img src=\\\"{{currentData.avatar || 'https://i0.wp.com/www.winhelponline.com/blog/wp-content/uploads/2017/12/user.png?resize=256%2C256&quality=100&ssl=1' }}\\\" class=\\\"circular\\\"></div>\\n      <div class=\\\"Inline\\\"><span style=\\\"padding:5px;\\\" >{{currentData.name}}</span></div>\\n      \\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding #content [scrollEvents]=\\\"true\\\" (ionScrollStart)=\\\"logScrollStart()\\\" (ionScroll)=\\\"logScrolling($event)\\\" (ionScrollEnd)=\\\"logScrollEnd()\\\">\\n\\t<ion-list>\\n\\t<div class=\\\"chat\\\" *ngFor=\\\"let message of userMessages\\\">\\n\\t\\t<div [class]=\\\"message.sender.uid === currentData.uid ? 'message me' : 'message you'\\\">{{message.text}}</div>\\n\\t</div> \\n\\t</ion-list>\\n</ion-content>\\n<ion-footer no-border>\\n\\t<ion-toolbar>\\n\\t\\t<div class=\\\"bar bar-footer bar-balanced chat-box-container\\\">\\n      \\t\\t<ion-input class=\\\"chat-editor-box\\\" placeholder=\\\"Type Your Message Here..\\\" type=\\\"text\\\" [(ngModel)]=\\\"messageText\\\"></ion-input>\\n      \\t\\t<div class=\\\"btnSendChatView\\\">\\n\\t\\t\\t\\t<button item-right clear (click)='sendMessage($event)' class = \\\"btnSendChatView\\\">\\n\\t\\t\\t\\t  <ion-icon name=\\\"send\\\" class=\\\"btnSendChat\\\"></ion-icon>\\n\\t\\t\\t\\t</button>\\n\\t\\t\\t  </div>\\n\\t\\t</div>\\n\\t</ion-toolbar>\\n</ion-footer>\\n\"","module.exports = \"ion-avatar {\\n  max-width: 25px;\\n  max-height: 25px; }\\n\\n.circular {\\n  width: 24px;\\n  height: 24px;\\n  border-radius: 50%; }\\n\\n.Inline {\\n  display: inline-flex;\\n  vertical-align: middle; }\\n\\n.chat-box-container {\\n  position: fixed;\\n  bottom: 2px;\\n  display: inline-flex;\\n  padding: 0 7px 0 0px;\\n  background: white;\\n  width: 100%; }\\n\\n.chat-editor-box {\\n  display: inline-flex;\\n  justify-items: center;\\n  background: white;\\n  align-content: center;\\n  align-items: center;\\n  border: 1px solid #ccc;\\n  border-radius: 24px;\\n  padding-left: 4px !important;\\n  font-size: 14px;\\n  min-height: 38px;\\n  max-height: 100px; }\\n\\n.btnSendChatView {\\n  height: 38px;\\n  width: 38px;\\n  margin-left: 4px;\\n  background: #2636be;\\n  color: white;\\n  display: flex;\\n  justify-content: center;\\n  align-content: center;\\n  align-items: center;\\n  vertical-align: middle;\\n  border-radius: 50%; }\\n\\n.btnSendChat {\\n  height: 24px;\\n  width: 24px; }\\n\\n.chat {\\n  font-family: sans-serif;\\n  display: flex;\\n  flex-direction: column; }\\n\\n.message {\\n  margin: 0.2em 0;\\n  padding: 0.5em;\\n  max-width: 70%; }\\n\\n.me {\\n  align-self: flex-start;\\n  background-color: #F1F0F0;\\n  color: black;\\n  border-radius: 10px 10px 10px 0px; }\\n\\n.you {\\n  align-self: flex-end;\\n  background-color: #2636be;\\n  color: white;\\n  border-radius: 10px 10px 0px 10px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9pbnMtMTUvRG9jdW1lbnRzL0NvbWV0Q2hhdC1Jb25pYy9Db21ldENoYXRQUk8tSW9uaWNTYW1wbGVBcHAvc3JjL2FwcC9jaGF0LXZpZXcvY2hhdC12aWV3LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNJLGVBQWU7RUFDZixnQkFBZ0IsRUFBQTs7QUFFcEI7RUFDSSxXQUFVO0VBQ1YsWUFBVztFQUVYLGtCQUFrQixFQUFBOztBQUd0QjtFQUVJLG9CQUFvQjtFQUNwQixzQkFBc0IsRUFBQTs7QUFJMUI7RUFDSSxlQUFlO0VBQ2YsV0FBVztFQUNYLG9CQUFvQjtFQUNwQixvQkFBb0I7RUFDcEIsaUJBQWlCO0VBQ2pCLFdBQVcsRUFBQTs7QUFFZjtFQUNJLG9CQUFvQjtFQUNwQixxQkFBcUI7RUFDckIsaUJBQWlCO0VBQ2pCLHFCQUFxQjtFQUNyQixtQkFBbUI7RUFDbkIsc0JBQXNCO0VBQ3RCLG1CQUFtQjtFQUNuQiw0QkFBNEI7RUFDNUIsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixpQkFBaUIsRUFBQTs7QUFJckI7RUFDSSxZQUFZO0VBQ1osV0FBVztFQUNYLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsWUFBWTtFQUNaLGFBQWE7RUFDYix1QkFBdUI7RUFDdkIscUJBQXFCO0VBQ3JCLG1CQUFtQjtFQUNuQixzQkFBc0I7RUFDdEIsa0JBQWtCLEVBQUE7O0FBR3RCO0VBQ0ksWUFBWTtFQUNaLFdBQVcsRUFBQTs7QUFHZjtFQUNJLHVCQUF1QjtFQUN2QixhQUFhO0VBQ2Isc0JBQXNCLEVBQUE7O0FBR3RCO0VBQ0EsZUFBZTtFQUNmLGNBQWM7RUFDZCxjQUFjLEVBQUE7O0FBR2Q7RUFDQSxzQkFBc0I7RUFDdEIseUJBQXlCO0VBQ3pCLFlBQVk7RUFDWixpQ0FBaUMsRUFBQTs7QUFHakM7RUFDQSxvQkFBb0I7RUFDcEIseUJBQXdCO0VBQ3hCLFlBQVk7RUFDWixpQ0FBaUMsRUFBQSIsImZpbGUiOiJzcmMvYXBwL2NoYXQtdmlldy9jaGF0LXZpZXcucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXG5pb24tYXZhdGFyIHtcbiAgICBtYXgtd2lkdGg6IDI1cHg7XG4gICAgbWF4LWhlaWdodDogMjVweDtcbn1cbi5jaXJjdWxhcntcbiAgICB3aWR0aDoyNHB4O1xuICAgIGhlaWdodDoyNHB4O1xuICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbn1cblxuLklubGluZXtcblxuICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG5cbn1cblxuLmNoYXQtYm94LWNvbnRhaW5lcntcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgYm90dG9tOiAycHg7XG4gICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgcGFkZGluZzogMCA3cHggMCAwcHg7XG4gICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgd2lkdGg6IDEwMCU7XG59XG4uY2hhdC1lZGl0b3ItYm94e1xuICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgIGp1c3RpZnktaXRlbXM6IGNlbnRlcjtcbiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICAgIGJvcmRlci1yYWRpdXM6IDI0cHg7XG4gICAgcGFkZGluZy1sZWZ0OiA0cHggIWltcG9ydGFudDtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgbWluLWhlaWdodDogMzhweDtcbiAgICBtYXgtaGVpZ2h0OiAxMDBweDtcbn1cblxuXG4uYnRuU2VuZENoYXRWaWV3e1xuICAgIGhlaWdodDogMzhweDtcbiAgICB3aWR0aDogMzhweDtcbiAgICBtYXJnaW4tbGVmdDogNHB4O1xuICAgIGJhY2tncm91bmQ6ICMyNjM2YmU7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgYWxpZ24tY29udGVudDogY2VudGVyO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG59XG5cbi5idG5TZW5kQ2hhdHtcbiAgICBoZWlnaHQ6IDI0cHg7XG4gICAgd2lkdGg6IDI0cHg7XG59XG5cbi5jaGF0IHtcbiAgICBmb250LWZhbWlseTogc2Fucy1zZXJpZjtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgfVxuICAgIFxuICAgIC5tZXNzYWdlIHtcbiAgICBtYXJnaW46IDAuMmVtIDA7XG4gICAgcGFkZGluZzogMC41ZW07XG4gICAgbWF4LXdpZHRoOiA3MCU7XG4gICAgfVxuICAgIFxuICAgIC5tZSB7XG4gICAgYWxpZ24tc2VsZjogZmxleC1zdGFydDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjFGMEYwO1xuICAgIGNvbG9yOiBibGFjaztcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4IDEwcHggMTBweCAwcHg7XG4gICAgfVxuICAgIFxuICAgIC55b3Uge1xuICAgIGFsaWduLXNlbGY6IGZsZXgtZW5kO1xuICAgIGJhY2tncm91bmQtY29sb3I6IzI2MzZiZTtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgYm9yZGVyLXJhZGl1czogMTBweCAxMHB4IDBweCAxMHB4O1xuICAgIH0iXX0= */\"","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { NavigationExtras, Router, ActivatedRoute } from '@angular/router';\nimport { NavController } from '@ionic/angular';\nimport { CometChat, User, Message } from '@cometchat-pro/chat';\nimport { IonContent } from '@ionic/angular';\n\n\n@Component({\n  selector: 'app-chat-view',\n  templateUrl: './chat-view.page.html',\n  styleUrls: ['./chat-view.page.scss'],\n})\nexport class ChatViewPage implements OnInit {\n  \n  @ViewChild('content') content: any;\n\n  currentData : any;\n  messagesRequest : any;\n  userMessages:any;\n  public messageText : string;\n  loggedInUserData : any = CometChat.getLoggedinUser();\n\n  constructor(private router: Router, private route: ActivatedRoute) { \n\n    this.route.queryParams.subscribe(params => {\n\n      console.log('params: ',params);\n\n      if(this.router.getCurrentNavigation().extras.state){\n        this.currentData = this.router.getCurrentNavigation().extras.state.user;\n       \n      }\n\n    })\n  }\n\nionViewWillEnter(): void {\n    setTimeout(() => {\n      console.log(\"scrolled caled\");\n      this.content.scrollToBottom(300);\n  }, 2000);\n}\n\nngOnInit() {\n  var  limit = 30;\n  console.log(\"data of currentData is \",this.currentData);\n  var uid : string= this.currentData[\"uid\"];\n  console.log(\"uid \",uid);\n  this.messagesRequest = new CometChat.MessagesRequestBuilder().setLimit(limit).setUID(this.currentData.uid).build();\n  this.loadMessages();\n  this.addMessageEventListner();\n}\n\nloadMessages(){\n\n  this.messagesRequest.fetchPrevious().then(\n    messages => {\n      console.log(\"Message list fetched:\", messages);\n      // Handle the list of messages\n      this.userMessages = messages;\n      // this.userMessages.prepend(messages);\n      console.log(\"UserMessages are \",this.userMessages);\n      //this.content.scrollToBottom(1500);\n      this.moveToBottom();\n    },\n    error => {\n      console.log(\"Message fetching failed with error:\", error);\n    }\n  );\n\n}\n\nloadPreviousMessages(){\n  this.messagesRequest.fetchPrevious().then(\n    messages => {\n      console.log(\"Message list fetched:\", messages);\n      // Handle the list of messages\n      var newMessages = messages; \n      // this.userMessages = messages;\n      // this.userMessages.prepend(messages);\n\n      if (newMessages != \"\"){\n        this.userMessages = newMessages.concat(this.userMessages);\n      }\n\n      console.log(\"UserMessages are \",this.userMessages);\n      //this.content.scrollToBottom(1500);\n    },\n    error => {\n      console.log(\"Message fetching failed with error:\", error);\n    }\n  );\n}\n\n  moveToBottom(){\n    console.log(\"here moving to bottom\");\n    this.content.scrollToBottom(1500);\n  }\n\n  logScrollStart(){\n    console.log(\"logScrollStart : When Scroll Starts\");\n  }\n\n  logScrolling($event){\n    console.log(\"logScrolling : When Scrolling \",$event.detail.scrollTop);\n    if($event.detail.scrollTop == 0){\n      console.log(\"scroll reached to top\");\n      this.loadPreviousMessages();\n    }\n  }\n\n  logScrollEnd(){\n    console.log(\"logScrollEnd : When Scroll Ends\");\n  }\n\n  addMessageEventListner(){\n\n    var listenerID = \"OneOnOneMessage\";\n\n      CometChat.addMessageListener(listenerID, new CometChat.MessageListener({\n      onTextMessageReceived: textMessage => {\n      console.log(\"Text message successfully\", textMessage);\n      if (textMessage.receiverID == this.loggedInUserData.uid){\n        this.userMessages.push(textMessage);\n        this.moveToBottom();\n      }\n      \n      // Handle text message\n      },\n      onMediaMessageReceived: mediaMessage => {\n      console.log(\"Media message received successfully\",  mediaMessage);\n      // Handle media message\n      },\n      onCutomMessageReceived: customMessage => {\n      console.log(\"Media message received successfully\",  customMessage);\n      // Handle media message\n      }\n      \n    })\n    );\n\n  }\n\n  sendMessage(){\n\n    console.log(\"tapped on send Message \",this.messageText );\n    if (this.messageText != \"\"){\n\n      var messageType = CometChat.MESSAGE_TYPE.TEXT;\n      var receiverType = CometChat.RECEIVER_TYPE.USER;\n\n      var textMessage = new CometChat.TextMessage(this.currentData.uid, this.messageText, messageType, receiverType);\n\n      CometChat.sendMessage(textMessage).then(\n        message => {\n        console.log(\"Message sent successfully:\", message);\n        // Text Message Sent Successfully\n        this.userMessages.push(message);\n        this.messageText = \"\";\n        // this.content.scrollToBottom(1500);\n        this.moveToBottom();\n        },\n      error => {\n        console.log(\"Message sending failed with error:\", error);\n        }\n      );\n\n    }\n  }\n\n}\n"],"sourceRoot":""}