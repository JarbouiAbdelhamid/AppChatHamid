(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{BypF:function(n,l,e){"use strict";e.r(l);var o=e("CcnG"),t=e("mtpe"),u=e("mrSG"),s=e("a3Cf"),i=function(n){function l(){return null!==n&&n.apply(this,arguments)||this}return Object(u.d)(l,n),l.prototype.hideFormAccessoryBar=function(n){return Object(s.cordova)(this,"hideFormAccessoryBar",{sync:!0},arguments)},l.prototype.hide=function(){return Object(s.cordova)(this,"hide",{sync:!0,platforms:["iOS","Android"]},arguments)},l.prototype.show=function(){return Object(s.cordova)(this,"show",{sync:!0,platforms:["Android"]},arguments)},l.prototype.setResizeMode=function(n){return Object(s.cordova)(this,"setResizeMode",{sync:!0,platforms:["iOS"]},arguments)},l.prototype.onKeyboardShow=function(){return Object(s.cordova)(this,"onKeyboardShow",{eventObservable:!0,event:"native.keyboardshow",platforms:["iOS","Android"]},arguments)},l.prototype.onKeyboardWillShow=function(){return Object(s.cordova)(this,"onKeyboardWillShow",{eventObservable:!0,event:"keyboardWillShow",platforms:["iOS","Android"]},arguments)},l.prototype.onKeyboardHide=function(){return Object(s.cordova)(this,"onKeyboardHide",{eventObservable:!0,event:"native.keyboardhide",platforms:["iOS","Android"]},arguments)},l.prototype.onKeyboardWillHide=function(){return Object(s.cordova)(this,"onKeyboardWillHide",{eventObservable:!0,event:"keyboardWillHide",platforms:["iOS","Android"]},arguments)},Object.defineProperty(l.prototype,"isVisible",{get:function(){return Object(s.cordovaPropertyGet)(this,"isVisible")},set:function(n){Object(s.cordovaPropertySet)(this,"isVisible",n)},enumerable:!0,configurable:!0}),l.pluginName="Keyboard",l.plugin="cordova-plugin-ionic-keyboard",l.pluginRef="window.Keyboard",l.repo="https://github.com/ionic-team/cordova-plugin-ionic-keyboard",l.platforms=["Android","iOS"],l}(s.IonicNativePlugin),r=function(){function n(n,l,e,o){var t=this;this.router=n,this.route=l,this.keyboard=e,this.renderer2=o,document.getElementsByTagName("html").item(0),this.keyboard.onKeyboardHide().subscribe(function(){t.moveToBottom()}),this.keyboard.onKeyboardShow().subscribe(function(){t.moveToBottom()}),this.route.queryParams.subscribe(function(n){console.log("params: ",n),t.router.getCurrentNavigation().extras.state&&(t.currentGroupData=t.router.getCurrentNavigation().extras.state.group)})}return n.prototype.ionViewWillEnter=function(){var n=this;setTimeout(function(){console.log("scrolled caled"),n.content.scrollToBottom(300)},2e3)},n.prototype.ngOnInit=function(){var n=this;console.log("data of currentGroupData is ",this.currentGroupData),console.log("guid ",this.currentGroupData.guid),this.messagesRequest=(new t.CometChat.MessagesRequestBuilder).setLimit(30).setGUID(this.currentGroupData.guid).build(),this.loadMessages(),this.addMessageEventListner(),t.CometChat.getLoggedinUser().then(function(l){console.log("user is ",l),n.loggedInUserData=l},function(n){console.log("error getting details:",{error:n})})},n.prototype.loadMessages=function(){var n=this;this.messagesRequest.fetchPrevious().then(function(l){console.log("Message list fetched:",l),n.groupMessages=l,console.log("groupMessages are ",n.groupMessages),n.moveToBottom()},function(n){console.log("Message fetching failed with error:",n)})},n.prototype.loadPreviousMessages=function(){var n=this;this.messagesRequest.fetchPrevious().then(function(l){console.log("Message list fetched:",l),""!=l&&(n.groupMessages=l.concat(n.groupMessages)),console.log("UserMessages are ",n.groupMessages)},function(n){console.log("Message fetching failed with error:",n)})},n.prototype.moveToBottom=function(){console.log("here moving to bottom"),this.content.scrollToBottom(2e3)},n.prototype.logScrollStart=function(){console.log("logScrollStart : When Scroll Starts")},n.prototype.logScrolling=function(n){console.log("logScrolling : When Scrolling ",n.detail.scrollTop),0==n.detail.scrollTop&&(console.log("scroll reached to top"),this.loadPreviousMessages())},n.prototype.logScrollEnd=function(){console.log("logScrollEnd : When Scroll Ends")},n.prototype.addMessageEventListner=function(){var n=this;t.CometChat.addMessageListener("GroupMessage",new t.CometChat.MessageListener({onTextMessageReceived:function(l){console.log("Text message successfully",l),l.receiverID!=n.loggedInUserData.uid&&(n.groupMessages.push(l),n.moveToBottom()),console.log("here uid ",l.sender.uid),console.log("logged userID ",n.loggedInUserData.uid)},onMediaMessageReceived:function(n){console.log("Media message received successfully",n)},onCutomMessageReceived:function(n){console.log("Media message received successfully",n)}}))},n.prototype.sendMessage=function(){var n=this;if(console.log("tapped on send Message ",this.messageText),""!=this.messageText){var l=new t.CometChat.TextMessage(this.currentGroupData.guid,this.messageText,t.CometChat.MESSAGE_TYPE.TEXT,t.CometChat.RECEIVER_TYPE.GROUP);t.CometChat.sendMessage(l).then(function(l){console.log("Message sent successfully:",l),n.groupMessages.push(l),n.messageText="",n.moveToBottom()},function(n){console.log("Message sending failed with error:",n)})}},n}(),a=function(){return function(){}}(),c=e("pMnS"),g=e("oBZk"),d=e("ZZ/e"),b=e("Ip0R"),p=e("gIcY"),h=e("ZYCi"),f=o.nb({encapsulation:0,styles:[["ion-avatar[_ngcontent-%COMP%]{max-width:25px;max-height:25px}.circular[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%}.Inline[_ngcontent-%COMP%]{display:inline-flex;vertical-align:middle}.chat-box-container[_ngcontent-%COMP%]{position:fixed;bottom:2px;display:inline-flex;padding:0 7px 0 0;background:#fff;width:100%}.chat-editor-box[_ngcontent-%COMP%]{display:inline-flex;justify-items:center;background:#fff;align-content:center;align-items:center;border:1px solid #ccc;border-radius:24px;padding-left:4px!important;font-size:14px;min-height:38px;max-height:100px}.btnSendChatView[_ngcontent-%COMP%]{height:38px;width:38px;margin-left:4px;background:#2636be;color:#fff;display:flex;justify-content:center;align-content:center;align-items:center;vertical-align:middle;border-radius:50%}.btnSendChat[_ngcontent-%COMP%]{height:24px;width:24px}.chat[_ngcontent-%COMP%]{font-family:sans-serif;display:flex;flex-direction:column}.message[_ngcontent-%COMP%]{margin:.2em 0;padding:.5em;max-width:70%}.me[_ngcontent-%COMP%]{align-self:flex-start;background-color:#f1f0f0;color:#000;border-radius:10px 10px 10px 0}.you[_ngcontent-%COMP%]{align-self:flex-end;background-color:#2636be;color:#fff;border-radius:10px 10px 0}"]],data:{}});function m(n){return o.Eb(0,[(n()(),o.pb(0,0,null,null,6,"div",[["class","chat"]],null,null,null,null,null)),(n()(),o.pb(1,0,null,null,5,"div",[],[[8,"className",0]],null,null,null,null)),(n()(),o.pb(2,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),o.pb(3,0,null,null,1,"b",[["style","\n          font-size: 10px"]],null,null,null,null,null)),(n()(),o.Db(4,null,["",":"])),(n()(),o.pb(5,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),o.Db(6,null,["",""]))],null,function(n,l){n(l,1,0,l.context.$implicit.sender.uid===l.component.loggedInUserData.uid?"message you":"message me"),n(l,4,0,l.context.$implicit.sender.name),n(l,6,0,l.context.$implicit.text)})}function v(n){return o.Eb(0,[o.Bb(402653184,1,{content:0}),(n()(),o.pb(1,0,null,null,15,"ion-header",[],null,null,null,g.C,g.h)),o.ob(2,49152,null,0,d.A,[o.h,o.k],null,null),(n()(),o.pb(3,0,null,0,13,"ion-toolbar",[],null,null,null,g.P,g.u)),o.ob(4,49152,null,0,d.Ab,[o.h,o.k],null,null),(n()(),o.pb(5,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,g.z,g.e)),o.ob(6,49152,null,0,d.k,[o.h,o.k],null,null),(n()(),o.pb(7,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==o.zb(n,9).onClick(e)&&t),t},g.x,g.c)),o.ob(8,49152,null,0,d.f,[o.h,o.k],null,null),o.ob(9,16384,null,0,d.g,[[2,d.gb],d.Gb],null,null),(n()(),o.pb(10,0,null,0,6,"ion-title",[],null,null,null,g.O,g.t)),o.ob(11,49152,null,0,d.yb,[o.h,o.k],null,null),(n()(),o.pb(12,0,null,0,1,"div",[["class","Inline"]],null,null,null,null,null)),(n()(),o.pb(13,0,null,null,0,"img",[["class","circular"]],[[8,"src",4]],null,null,null,null)),(n()(),o.pb(14,0,null,0,2,"div",[["class","Inline"]],null,null,null,null,null)),(n()(),o.pb(15,0,null,null,1,"span",[["style","padding:5px;"]],null,null,null,null,null)),(n()(),o.Db(16,null,["",""])),(n()(),o.pb(17,0,null,null,5,"ion-content",[["padding",""]],null,[[null,"ionScrollStart"],[null,"ionScroll"],[null,"ionScrollEnd"]],function(n,l,e){var o=!0,t=n.component;return"ionScrollStart"===l&&(o=!1!==t.logScrollStart()&&o),"ionScroll"===l&&(o=!1!==t.logScrolling(e)&&o),"ionScrollEnd"===l&&(o=!1!==t.logScrollEnd()&&o),o},g.A,g.f)),o.ob(18,49152,[[1,4],["content",4]],0,d.t,[o.h,o.k],{scrollEvents:[0,"scrollEvents"]},null),(n()(),o.pb(19,0,null,0,3,"ion-list",[],null,null,null,g.J,g.o)),o.ob(20,49152,null,0,d.N,[o.h,o.k],null,null),(n()(),o.gb(16777216,null,0,1,null,m)),o.ob(22,278528,null,0,b.h,[o.O,o.L,o.s],{ngForOf:[0,"ngForOf"]},null),(n()(),o.pb(23,0,null,null,15,"ion-footer",[["no-border",""]],null,null,null,g.B,g.g)),o.ob(24,49152,null,0,d.y,[o.h,o.k],null,null),(n()(),o.pb(25,0,null,0,13,"ion-toolbar",[],null,null,null,g.P,g.u)),o.ob(26,49152,null,0,d.Ab,[o.h,o.k],null,null),(n()(),o.pb(27,0,null,0,11,"div",[["class","bar bar-footer bar-balanced chat-box-container"]],null,null,null,null,null)),(n()(),o.pb(28,0,null,null,6,"ion-input",[["class","chat-editor-box"],["placeholder","Type Your Message Here.."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var t=!0,u=n.component;return"ionBlur"===l&&(t=!1!==o.zb(n,29)._handleBlurEvent()&&t),"ionChange"===l&&(t=!1!==o.zb(n,29)._handleInputEvent(e.target.value)&&t),"ngModelChange"===l&&(t=!1!==(u.messageText=e)&&t),t},g.G,g.l)),o.ob(29,16384,null,0,d.Jb,[o.k],null,null),o.Ab(1024,null,p.b,function(n){return[n]},[d.Jb]),o.ob(31,671744,null,0,p.e,[[8,null],[8,null],[8,null],[6,p.b]],{model:[0,"model"]},{update:"ngModelChange"}),o.Ab(2048,null,p.c,null,[p.e]),o.ob(33,16384,null,0,p.d,[[4,p.c]],null,null),o.ob(34,49152,null,0,d.F,[o.h,o.k],{placeholder:[0,"placeholder"],type:[1,"type"]},null),(n()(),o.pb(35,0,null,null,3,"div",[["class","btnSendChatView"]],null,null,null,null,null)),(n()(),o.pb(36,0,null,null,2,"button",[["class","btnSendChatView"],["clear",""],["item-right",""]],null,[[null,"click"]],function(n,l,e){var o=!0;return"click"===l&&(o=!1!==n.component.sendMessage()&&o),o},null,null)),(n()(),o.pb(37,0,null,null,1,"ion-icon",[["class","btnSendChat"],["name","send"]],null,null,null,g.D,g.i)),o.ob(38,49152,null,0,d.B,[o.h,o.k],{name:[0,"name"]},null)],function(n,l){var e=l.component;n(l,18,0,!0),n(l,22,0,e.groupMessages),n(l,31,0,e.messageText),n(l,34,0,"Type Your Message Here..","text"),n(l,38,0,"send")},function(n,l){var e=l.component;n(l,13,0,o.rb(1,"",e.currentGroupData.icon||"https://pbs.twimg.com/profile_images/857490466572443648/c05JqEgo_400x400.jpg","")),n(l,16,0,e.currentGroupData.name),n(l,28,0,o.zb(l,33).ngClassUntouched,o.zb(l,33).ngClassTouched,o.zb(l,33).ngClassPristine,o.zb(l,33).ngClassDirty,o.zb(l,33).ngClassValid,o.zb(l,33).ngClassInvalid,o.zb(l,33).ngClassPending)})}function y(n){return o.Eb(0,[(n()(),o.pb(0,0,null,null,2,"app-groupchat-view",[],null,null,null,v,f)),o.Ab(512,null,i,i,[]),o.ob(2,114688,null,0,r,[h.m,h.a,i,o.D],null,null)],function(n,l){n(l,2,0)},null)}var x=o.lb("app-groupchat-view",r,y,{},{},[]);e.d(l,"GroupchatViewPageModuleNgFactory",function(){return M});var M=o.mb(a,[],function(n){return o.wb([o.xb(512,o.j,o.bb,[[8,[c.a,x]],[3,o.j],o.x]),o.xb(4608,b.j,b.i,[o.u,[2,b.p]]),o.xb(4608,p.g,p.g,[]),o.xb(4608,d.b,d.b,[o.z,o.g]),o.xb(4608,d.Fb,d.Fb,[d.b,o.j,o.q,b.c]),o.xb(4608,d.Ib,d.Ib,[d.b,o.j,o.q,b.c]),o.xb(1073742336,b.b,b.b,[]),o.xb(1073742336,p.f,p.f,[]),o.xb(1073742336,p.a,p.a,[]),o.xb(1073742336,d.Cb,d.Cb,[]),o.xb(1073742336,h.n,h.n,[[2,h.t],[2,h.m]]),o.xb(1073742336,a,a,[]),o.xb(1024,h.k,function(){return[[{path:"",component:r}]]},[])])})}}]);